<html xmlns:th="http://www.thymeleaf.org">
<title>Выборка</title>
<head th:replace="commons::head"></head>
<link rel="stylesheet" th:href="@{/css/select2_settings.css}">
<body>

	<div th:replace="commons::navbar"></div>
	<div th:replace="commons::navAdmission"></div>

<form action="/personSelComAS" accept-charset="UTF-8" method="POST">
	<div class="wrapper">
		<div class="container" style="max-width: 600px;">
			
				<p></p>
				<p></p>
				<div class="input-group mb-3">
					<div class="form-check">
						<input class="form-check-input" name="checkboxname" type="checkbox" value="check1" id="flexCheckDefault"
							style="margin-top: 10px;" th:checked="${check1}">
					</div>
					<div class="input-group-prepend">
						<div class="input-group-text" style="border-top-left-radius: 0.25rem; border-bottom-left-radius: 0.25rem;">Дата</div>
					</div>
					<input type="date" name="dateSubm" th:value="${dateSubm}? ${dateSubm}:${'2021-07-07'}" class="form-control"
						id="inlineFormInputGroupUsername2" placeholder="Введите дату">
				</div>

				<div class="input-group mb-3">
					<div class="form-check"></div>
					<div class="input-group-prepend">
						<div class="input-group-text" style="border-top-left-radius: 0.25rem; border-bottom-left-radius: 0.25rem;">Время</div>
					</div>
					<div class="input-group-prepend">
						<div class="input-group-text">С</div>
					</div>
					<input type="time" name="timeFrom" th:value="${timeFrom}" class="form-control" id="inlineFormInputTime">

					<div class="input-group-prepend">
						<div class="input-group-text">По</div>
					</div>
					<input type="time" name="timeTo" th:value="${timeTo}" class="form-control" id="inlineFormInputTime2">
				</div>

				<hr>
				
				<div class="input-group mb-3">
                    <div class="input-group-prepend">

						<div class="form-check">
							<input class="form-check-input" name="checkboxname" type="checkbox" value="check2" id="flexCheckDefault" style="margin-top: 10px;" th:checked="${check2}">
						</div>

						<div class="input-group-text" style="border-top-left-radius: 0.25rem; border-bottom-left-radius: 0.25rem;">Специальность</div>

						<select class="js-example-programmatic custom-select" id="selSpec" name="specName" required>
							<option selected th:if="${specName!=null}" th:value="${specName}" th:text="${specName}" disabled/>
							<option th:each="specialty: ${specialtys}" th:value="${specialty.specialtyName}"
								th:text="${specialty.specialtyName} "></option>
						</select>
					</div>
                </div>
                
                <hr>

				<div class="input-group mb-3">
					<div class="input-group-prepend" style="width: 100%;">
						<div class="form-check">
							<input class="form-check-input" name="checkboxname" type="checkbox" value="check3" id="flexCheckDefault"
								style="margin-top: 10px;" th:checked="${check3}">
						</div>
						<div class="input-group-text"
							style="border-top-left-radius: 0.25rem; border-bottom-left-radius: 0.25rem; ">Район</div>
						<select style="width: 100%" class="js-example-programmatic custom-select" id="typePersonSettlement" name="typePersonSettlement"
							required>
							<option selected th:if="${typePersonSettlement!=null}" th:value="${typePersonSettlement}"
								th:text="${typePersonSettlement}" disabled/>
								
							<option selected th:if="${typePersonSettlement==null}" th:value="${'Витебск'}"
								th:text="${'Витебск'}" disabled/>
								
							<option value="Витебск">Витебск</option>
							<option value="Витебский район">Витебский район</option>
							<option value="Полоцк">Полоцк</option>
							<option value="Новополоцк">Новополоцк</option>
							<option value="Полоцкий район">Полоцкий район</option>
							<option value="Орша">Орша</option>
							<option value="Оршанский район">Оршанский район</option>
							<option value="Городокский район">Городокский район</option>
							<option value="Сенненский район">Сенненский район</option>
							<option value="Ушачский район">Ушачский район</option>
							<option value="Шумилинский район">Шумилинский район</option>
							<option value="Лепельский район">Лепельский район</option>
							<option value="Чашникский район">Чашникский район</option>
							<option value="Бешенковичский район">Бешенковичский район</option>
							<option value="Лиозненский район">Лиозненский район</option>
							<option value="Докшицкий район">Докшицкий район</option>
							<option value="Глубокский район">Глубокский район</option>
							<option value="Поставский район">Поставский район</option>
							<option value="Шарковщинский район">Шарковщинский район</option>
							<option value="Миорский район">Миорский район</option>
							<option value="Верхнедвинский район">Верхнедвинский район</option>
							<option value="Россоонский район">Россоонский район</option>
							<option value="Толочинский район">Толочинский район</option>
							<option value="Другой">Другой</option>
						</select>
					</div>
				</div>
				
				<hr>
				
				<div class="input-group mb-3">
                    <div class="input-group-prepend" style="width: 100%;">
                        <div class="form-check">
                            <input class="form-check-input" name="checkboxname" type="checkbox" value="check4" id="flexCheckDefault"
                                style="margin-top: 10px;" th:checked="${check4}">
                        </div>
                        <div class="input-group-text"
                            style="border-top-left-radius: 0.25rem; border-bottom-left-radius: 0.25rem; ">Иностранный язык</div>
                        <select style="width: 100%" class="js-example-programmatic custom-select" id="language" name="language" 
                            required>
                            <option selected th:if="${language!=null}" th:value="${language}"
                                th:text="${language}" disabled/>
                            <option value="Нет">Нет</option>
                            <option value="Немецкий">Немецкий</option>
                            <option value="Английский">Английский</option>
                            <option value="Французский">Французский</option>
                            <option value="Испанский">Испанский</option>
                            <option value="Итальянский">Итальянский</option>
                            <option value="Китайский">Китайский</option>
                        </select>
                    </div>
                </div>
                <hr>
                
				<div class="input-group mb-3">
                    <div class="input-group-prepend" style="width: 100%;">
                        <div class="form-check">
                            <input class="form-check-input" name="checkboxname" type="checkbox" value="check5" id="flexCheckDefault"
                                style="margin-top: 10px;" th:checked="${check5}">
                        </div>
                        <div class="input-group-text"
                            style="border-top-left-radius: 0.25rem; border-bottom-left-radius: 0.25rem; ">Необходимость общежития</div>
                        <select style="width: 100%" class="js-example-programmatic custom-select" id="dormitory" name="dormitory" 
                            required>
                            <option style="background: #dedede" selected th:if="${dormitory!=null}" th:value="${dormitory}"
                                th:text="${dormitory}" disabled/>
                            <option value="да">да</option>
                            <option value="нет">нет</option>
                        </select>
                    </div>
                </div>

                <hr>
				
				<p></p>
				<div class="input-group mb-3">
					<div class="input-group-prepend">
						<div class="form-check">
							<input class="form-check-input" name="checkboxname" type="checkbox" value="check10" id="flexCheckDefault" style="margin-top: 10px;" th:checked="${check10}">
						</div>
						<div class="input-group-text" style="border-top-left-radius: 0.25rem; border-bottom-left-radius: 0.25rem;">Средний балл</div>
					</div>
					<div class="input-group-prepend">
						<div class="input-group-text">От</div>
					</div>

					<input type="number" step="0.1" name="firstNum" 
						class="form-control" id="inlineFormInputGroupUsername2" th:value="${firstNum}">

					<div class="input-group-prepend">
						<div class="input-group-text">До</div>
					</div>
					<input type="number" step="0.1" name="secondNum" 
						class="form-control" id="inlineFormInputGroupUsername2" th:value="${secondNum}">
				</div>
				
				
				<div style="display: flex; justify-content: center; align-items: center;">
                    <button style="font-size: 120%; width: 40%; margin: 0 auto;" type="submit" name="btnId" value="11"
                        class="btn btn-success" align="center">Посчитать</button>
                </div>
				
				<p></p>
		</div>
	</div>

	<p></p>
	<div class="wrapper">
		<div class="container">
			<div class="row">
				<div class="col-md-10">
					<b style="margin-top: 0; margin-bottom: 0rem; font-size: 130%;">Результаты
						поиска: </b>
						<th:block th:if="${selComForm} != null">
					<th:block th:text="${selectionCommittees.size() + ' человек(а) '}" />
					</th:block>
				</div>
				<div class="col-md-2"
					style="padding-bottom: 0.5rem; padding-left: 2.25rem;">
 
						<button type="submit" name="btnId" value="4"  class="btn btn-success">Скачать Word</button>
					</th:block>
					
				</div>
			</div>
    			
    <script>
        function Validator(id_) {
            if (confirm("Вы подтверждаете операцию?")) {
                var ttt = document.getElementById(id_);
                alert(ttt.id);
                return (true);

            } else {
                return (false);

            }
        }
    </script>
			
			<div class="tab-content">
				<div class="tab-pane fade show active">

					<th:block th:if="${selComForm} != null and ${selectionCommittees.size()} !=0">
						<table class="table table-primary" width="1200">

							<thead>
								<tr align="center">
									<th scope="col" width="60">№ п/п</th>
									<th scope="col">ФИО</th>
									<th scope="col">Район</th>
									<th scope="col">Иностранный язык</th>
									<th scope="col">Средний балл</th>
									<th scope="col" width="220">Специальность</th>
									<th scope="col" width="200">Дата</th>
									<th scope="col"></th>
									<th scope="col"></th>

								</tr>
							</thead>
							<tbody>
								<tr th:each="sc, state: ${selectionCommittees}">

									<td align="center" bgcolor="#FFFFFF"><th:block
											th:text="${state.index+1}" /></td>
									<td align="center" bgcolor="#FFFFFF"><a
										th:href="@{/personSelCom?id={pid}(pid=${sc.id})}"><th:block
												th:text="${sc.person.surname+' '+sc.person.name+' '+sc.person.patronymic}" /></a></td>
												
									<td align="center" bgcolor="#FFFFFF"><th:block
											th:text="${sc.typePersonSettlement}" /></td>
											
									<td align="center" bgcolor="#FFFFFF"><th:block
											th:text="${sc.person.foreignLanguage}" /></td>
											
									<td align="center" bgcolor="#FFFFFF"><th:block
											th:text="${sc.person.averageScore}" /></td>

									<td align="center" bgcolor="#FFFFFF"><th:block
											th:text="${sc.person.specialty1.specialtyName}" /></td>

									<td align="center" bgcolor="#FFFFFF"><th:block
											th:text="${T(by.vgtk.support.Functions).getFormatDate(sc.dateSubmissionDocuments)}" /></td>
											
											<!-- th:text="${T(by.vgtk.support.Functions).getFormatDateWithoutHours(sc.dateSubmissionDocuments)}" /></td-->


									<td align="center" bgcolor="#FFFFFF"><a class="btn"
										th:href="@{/acceptanceOfDocuments?id={pid}(pid=${sc.id})}">
											<img src="/img/logos/edit_pen_logo.png" alt="edit"
											style="height: 20px; width: 20px" title="Редактировать">
									</a></td>

									<td align="center" bgcolor="#FFFFFF">
										<form action="personSelCom/delete" accept-charset="UTF-8"
											method="POST">
											<input class="input-group-text" name="id" type="text"
												th:id="${sc.id}" th:value="${sc.id}" hidden="true" /> <input
												class="input-group-text" name="personId" type="text"
												th:id="${sc.id}" th:value="${sc.id}" hidden="true" />
											<button class="btn" type="submit"
												onclick="JavaScript:return Validator(this.id);">
												<img src="/img/logos/delete_logo.png" alt="save02"
													style="height: 20px; width: 20px" title="Удалить">
											</button>

										</form>
									</td>
								</tr>
							</tbody>
						</table>
					</th:block>
					<th:block th:if="${selComForm} == null or ${selectionCommittees.size()} ==0">
						<table class="table table-primary">
							<tr>
								<th scope="col">Нет результата поиска</th>
							</tr>
						</table>
					</th:block>
				</div>
			</div>
		</div>
	</div>
	</form>


	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
		integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
		integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
		crossorigin="anonymous"></script>
	<!-- script src="https://cdn.ckeditor.com/ckeditor5/20.0.0/classic/ckeditor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script -->

	<script>
		jQuery(function() {
			jQuery(this).find(':disabled').removeAttr('disabled');
		});
	</script>

	<!-- livesearch -->
	<script> 
		$(document).ready(function() {
			$('#selSpec').select2({
				maximumSelectionLength : 2,
				language : "ru"
			});
		});
		
		$(document).ready(function() {
            $('#selTypePersonSettlement').select2({
                maximumSelectionLength : 2,
                language : "ru"
            });
        });
		
		
	</script>
	<script>
		function myFunction(imgs) {
			var expandImg = document.getElementById("expandedImg");
			var imgText = document.getElementById("imgtext");
			expandImg.src = imgs.src;
			imgText.innerHTML = imgs.alt;
			expandImg.parentElement.style.display = "block";
		}
	</script>
	<script type="text/javascript">
		$('#inputGroupFile04').on('change', function() {
			//get the file name
			var fileName = $(this).val();
			// alert("file: "+fileName);
			//replace the "Choose a file" label
			var str = fileName.substr(12, fileName.lenght);
			$(this).next('.custom-file-label').html(str);
		})
	</script>
	<script type="text/javascript">
		$('#inputGroupFile03').on('change', function() {
			//get the file name
			var fileName = $(this).val();
			// alert("file: "+fileName);
			//replace the "Choose a file" label
			var str = fileName.substr(12, fileName.lenght);
			$(this).next('.custom-file-label').html(str);
		})
	</script>

	<script type="text/javascript">
		function editInventory(img) {
			var btnDone = document.getElementById("done_img"
					+ img.id.slice(img.id.length - 1));
			btnDone.removeAttribute('hidden');

			var thDocName = document.getElementById("docName"
					+ img.id.slice(img.id.length - 1));
			thDocName.removeAttribute('disabled');

			var thDate = document.getElementById("docDate"
					+ img.id.slice(img.id.length - 1));
			thDate.disabled = false;

			var thSheetNumber = document.getElementById("sheetNumber"
					+ img.id.slice(img.id.length - 1));
			thSheetNumber.removeAttribute('disabled');

			var thNote = document.getElementById("note"
					+ img.id.slice(img.id.length - 1));
			thNote.removeAttribute('disabled');
			//console.log("note" + str.slice(str.length - 1));
			//console.log(str.length);
		}
	</script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
    <script type="text/javascript" th:src="@{/js/jquery.maskedinput.min.js}"></script>
    
    <!-- for drop down list -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    
    <script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/select2.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/ru.js}"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
    

    <script type="text/javascript">
                    $(".livesearch").chosen();
                </script>

</body>
</html>