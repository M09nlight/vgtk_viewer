<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<title>Профиль</title>
<head th:replace="commons::head"></head>


<style>
a.pdf:after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
</style>

<link rel="stylesheet" th:href="@{/js/fancybox/jquery.fancybox.min.css}">

<link rel="stylesheet" th:href="@{/css/jquery-ui-1.9.0.custom.css}">

<script language="javascript" type="text/javascript" th:href="@{/js/jquery-1.8.2.js}"></script>
<script language="javascript" type="text/javascript" th:href="@{/js/jquery-ui-1.9.0.custom.js}"></script>

<style>
 .outer{
            display: flex;
            justify-content: center;
        }
</style>

<body>
	<div th:replace="commons::navbar"></div>
	
	<div class="wrapper">
		<div class="container">
			<div class="row">
				<div class="col-md-9" style="padding-right: 0px;">
					<ul class="nav nav-tabs">
						<li class="nav-item nav-link"><a class="nav-link" id="nav-home-tab" data-toggle="tab" href="#nav-profile"
							role="tab" aria-selected="true">Информация</a></li>
						<li class="nav-item nav-link"><a class="nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-photos"
							role="tab" aria-selected="false">Фото</a></li>
						<li class="nav-item nav-link"><a class="nav-link" id="nav-docs-tab" data-toggle="tab" href="#nav-docs"
							role="tab" aria-selected="false">Документы</a></li>
						<li class="nav-item nav-link"><a class="nav-link" id="nav-ii-tab" data-toggle="tab" href="#nav-ii" role="tab"
							aria-selected="false">Внутренняя опись</a></li>
						<li class="nav-item nav-link"><a class="nav-link" id="nav-balls-tab" data-toggle="tab" href="#nav-balls"
							role="tab" aria-selected="false">Отметки</a></li>

					</ul>
				</div>
				<div class="col-md-2" style="">
					<!-- style="position: absolute; right: 0; margin-right: 8%;" -->
					<a th:href="@{/editPerson?id={pid}(pid=${person.id})}" class="btn btn-success"
						style="border: 7px solid transparent;">Редактировать</a>
				</div>
				<div class="col-md-1 pad-rl-0" style="">
					<a th:href="@{/personProfileDocx?id={pid}(pid=${person.id})}" class="btn btn-success"
						style="border: 7px solid transparent;">Печать</a>
				</div>
			</div>
			
			<div th:if="${personDocs==null}"> 
			hello</div>
			<div class="tab-content"  style="background-color: white;">

				<!-- div class="row row-cols-md-2 row-m-0"-->
				<div class="tab-pane fade show active" id="nav-profile" role="tabpanel" aria-labelledby="nav-home-tab">
					<div class="row row-m-0">
						<div class="col-md-2 pad-rl-0">
							<img alt="Фотка"
								th:src="${photos.size() < 1 ? '/img/stock_img/person.png' : 'data:image/jpeg;base64,' + photos[0]}"
								style="width: 100%; height: 277px;">
						</div>
						
						
						<div class="col-md-10 pad-rl-0">
							<ul class="list-group list-group-flush">
								<li class="list-group-item li-pers"><b>ФИО: </b> <th:block th:text="${person.surname}" /> <th:block
										th:text="${person.name}" /> <th:block th:text="${person.patronymic}" /></li>
								<li class="list-group-item li-pers"><b>Статус: </b> <th:block th:text="${person.type}" /></li>
								<li class="list-group-item li-pers"><b>Общежитие: </b> <th:block
										th:text="${person.room != null ? person.room.dormitory.address : ''}" /></li>
								<li class="list-group-item li-pers"><b>Комната: </b> <th:block
										th:text="${person.room != null ? person.room.number : ''}" /></li>
								<li class="list-group-item li-pers"  style="border-bottom-width: 1px;"><b>Дата рождения: </b> <th:block
                                        th:text="${T(by.vgtk.support.Functions).getFormatDateWithoutHours(person.dateOfBirth)}" /></li>
							</ul>
						</div>
					</div>
					
					<ul class="list-group list-group-flush">
					
					<div class="container">
					<div class="row">
					<div class="col-md-6" style="padding-right: 5px;">
						<li class="list-group-item"><b>Паспорт: </b> <th:block/>
						
						<th:block th:each="photoDoc : ${photosDocsPassport}">
						  <a data-fancybox="gallery" th:href="${'data:image/jpeg;base64,' + photoDoc}"> <img id="loading1"
						  class="m1" alt="Фотка" th:src="${'data:image/jpeg;base64,' + photoDoc}" style="height: 40px; margin-bottom: 10px;">
						  </a>
						</th:block>
						<br>
										 
						<!-- 			 
						<a data-fancybox="gallery" th:href="${'data:image/jpeg;base64,' + personDocs[0]}">
                            <img id="loading1" class="m1" alt="Фотка" th:src="${personDocs.size() < 1 ? '/img/stock_img/person.png' : 'data:image/jpeg;base64,' + personDocs[0]}"
                                style="height: 40px">
                        </a>
                        -->
						
                        
                        
        <th:block th:each="pdfDoc,status : ${pdfDocsPassport}">
		<!-- Trigger the modal with a button -->
        <button type="button" style="margin-top: 5px;" class="btn btn-info btn-sm" data-toggle="modal" th:data-target="${'#myModal' + status.count}">Открыть документ</button>
        
        
        <!-- div class="col-md-3">
<embed th:src="${'data:application/pdf;base64,' + pdfDoc}" width="80px" height="60px" />
<br>
<a class="" href="" data-toggle="modal" th:data-target="${'#myModal2' + status.count}">Открыть</a>

</div-->
        
        <!-- Modal -->
        <div th:id="${'myModal' + status.count}" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header" style="padding-top: 5px;padding-bottom: 0px;">
                    
                    <div class="row" style="width: 100%;">
                    <div class="col-md-11">
                    <div class="outer" style="width: 100%; padding-left: 80px;">
                    
                        <h4 class="modal-title">Modal Header</h4>
                    </div>
                    </div>
                    <div class="col-md-1" >
                        <button style="padding-top: 20px;padding-right: 0px;" type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    </div>
                    
                    </div>
                    
                    <div class="modal-body">
                        <embed th:src="${'data:application/pdf;base64,' + pdfDoc}"
                               frameborder="0" width="100%" height="400px">

                    </div>

                </div>
            </div>
        </div>
        </th:block>
						
						</li>
						
						<li class="list-group-item"><b>Личный номер: </b> <th:block th:text="${person.identNumber}" /></li>
						<li class="list-group-item"><b>Кем выдан: </b> <th:block th:text="${person.issuedBy}" /></li>
					
						<li class="list-group-item"><b>Пол: </b> <th:block th:text="${person.gender == 'м'?'мужской': 'женский'}" /></li>
						<li class="list-group-item"><b>Домашний адрес: </b> <th:block th:text="${person.homeAddress}" /></li>
						<li class="list-group-item"><b>Номер телефона: </b> <th:block th:text="${person.phoneNumber}" /></li>
					
						<li class="list-group-item"><b>Школа, год окончания: </b> <th:block th:text="${person.school}" /></li>
						<li class="list-group-item"><b>УО, год окончания: </b> <th:block th:text="${person.UOGraduationYear}" /></li>
						<li class="list-group-item"><b>Мать: </b> <th:block th:text="${person.mother}" /></li>
						<li class="list-group-item"><b>Отец: </b> <th:block th:text="${person.dad}" /></li>
						<li class="list-group-item"><b>Адрес родителей: </b> <th:block th:text="${person.parentsAddress}" /></li>
						<li class="list-group-item"><b>Место работы родителей: </b> <th:block th:text="${person.parentsJobs}" /></li>
						<li class="list-group-item"><b>Проживание в общежитии: </b> <th:block th:text="${person.dormitory}" /></li>
						<li class="list-group-item"><b>Документ об образовании: </b> <th:block th:text="${person.educationDocument}" />
						
						<th:block th:each="photoDoc : ${photosDocsEducationDocument}">
                          <a data-fancybox="gallery1" th:href="${'data:image/jpeg;base64,' + photoDoc}"> <img id="loading1"
                          class="m2" alt="Фотка" th:src="${'data:image/jpeg;base64,' + photoDoc}" style="height: 40px">
                          </a>
                        </th:block>
                        
<div class="row">
<th:block th:each="pdfDoc,status : ${pdfDocsEducationDocumnt}">

        <!-- Trigger the modal with a button -->
        
<div class="col-md-2">
<object th:data="${'data:application/pdf;base64,' + pdfDoc}" width="80px" height="60px" ></object>
<br>
<a class="" href="" data-toggle="modal" th:data-target="${'#myModal2' + status.count}">Открыть</a>


<!-- embed
    th:src="${'data:application/pdf;base64,' + pdfDoc}"
    type="application/pdf"
    frameBorder="0"
    height="100%"
    width="100%"
></embed-->


</div>

        <!-- Modal -->
        <div th:id="${'myModal2' + status.count}" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header" style="padding-top: 5px;padding-bottom: 0px;">
                    
                    <div class="row" style="width: 100%;">
                    <div class="col-md-11">
                    <div class="outer" style="width: 100%; padding-left: 80px;">
                    
                        <h4 class="modal-title">Modal Header</h4>
                    </div>
                    </div>
                    <div class="col-md-1" >
                        <button style="padding-top: 20px;padding-right: 0px;" type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    </div>
                    </div>
                    
                    <div class="modal-body">
                        <embed th:src="${'data:application/pdf;base64,' + pdfDoc}"
                               frameborder="0" width="100%" height="400px">

                    </div>

                </div>
            </div>
        </div>
        </th:block>
        
        </div>
						
						</li>
						<li class="list-group-item"><b>Номер аттестата: </b> <th:block th:text="${person.certificateNumber}" /></li>
						<li class="list-group-item"><b>Средний балл: </b> <th:block th:text="${person.averageScore}" /></li>
						<li class="list-group-item"><b>Иностранный язык: </b> <th:block th:text="${person.foreignLanguage}" /></li>
						</div> <!-- col-md-6 -->
    					<div class="col-md-6" style="padding-left: 5px;">
    					
                   
						
						<!-- Здесь должно быть разделение -->
                        <th:block th:if="${person.specialty1 != null}" >
                        <li class="list-group-item"><b>Доп. сведения: </b> <th:block th:text="${person.dopInfo}" /></li>
                        <li class="list-group-item" style=""><b>Тип образования: </b> <th:block
                                th:text="${person.specialty1.department.departmentEducationType}" /></li>
                                
						<li class="list-group-item" style=""><b>Отделение: </b> <th:block th:text="${person.department.departmentName}" /></li>
						
                        <li class="list-group-item" style=""><b>Специальность: </b> 
                                <th:block th:text="${person.specialty1.SpecialtyName}" /></li>
                                
                        <li class="list-group-item"><b>Квалификация: </b> 
                                <th:block th:each="qua: ${person.specialty1.qualification}">
                                    <th:block th:text="${qua.name}" />
                                </th:block></li>
                        </th:block>
						
						<li class="list-group-item" ><b>Форма обучения: </b> <th:block th:text="${person.formOfEducation}" /></li>
						<li class="list-group-item" ><b>Группа: </b> <th:block th:text="${person.group1.groupName}" /></li>
						<li class="list-group-item"><b>Курс: </b> <th:block th:text="${person.course}" /></li>
						
						<li class="list-group-item"><b>Год поступления: </b> <th:block th:text="${person.yearAdmission}" /></li>
						<li class="list-group-item"><b>Время поступления в УО, номер и дата приказа о зачислении: </b> <th:block
								th:text="${person.orderOfAdmission}" /></li>
						<li class="list-group-item"><b>Год окончания: </b> <th:block th:text="${person.yearEnding}" /></li>
						<li class="list-group-item"><b>Окончил УО, номер и дата приказа: </b> <th:block
								th:text="${person.orderOfEnd}" /></li>
						<li class="list-group-item"><b>Распределение: </b> <th:block th:text="${person.distribution}" /></li>
						<li class="list-group-item"><b>Льготы: </b> <th:block th:text="${person.privileges}" /></li>
						<li class="list-group-item"><b>Другие документы: </b> <th:block th:text="${person.otherDocs}" /></li>
						<li class="list-group-item"><b>Граджанство: </b> <th:block th:text="${person.citizenship}" /></li>
						<li class="list-group-item"><b>Семейное положение: </b> <th:block th:text="${person.maritalStatus}" /></li>
						<li class="list-group-item" ><b>Статус семьи: </b> <th:block th:text="${person.familyStatus}" /></li>
						</div>
						</div> <!-- row -->
                        </div> <!-- container -->
                        
                        <div class="container">

						<div class="accordion" id="accordion">
							<li class="list-group-item" style="border-width: 1px 0 1px;" data-toggle="collapse" data-target="#collapseOne"
								aria-controls="collapseOne"><b>Нарушения &#x25BE</b></li>
							<div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
								<th:block th:if="vioList != null" th:each="vio: ${vioList}">
									<th:block th:if="vio.id != null">
										<li class="list-group-item" style="border-width: 0 0 1px;" th:text="${vio.description}" />
									</th:block>
								</th:block>
							</div>
						</div>

						<th:block
							th:if="${(person.orphanInfo != null) && 
               					 (person.familyStatus != 'полная семья') && (person.familyStatus != 'неполная семья') &&
                				 (person.familyStatus != 'многодетная-полная семья') && (person.familyStatus !=  'многодетная-неполная семья') }">
							<div class="accordion" id="accordion2">
								<li class="list-group-item" style="border-width: 0 0 1px;" data-toggle="collapse" data-target="#collapse2"
									aria-controls="collapse2"><b>Информация о сироте &#x25BE</b></li>
								<div id="collapse2" class="collapse" aria-labelledby="headingOne" data-parent="#accordion2">
									<li class="list-group-item" style="border-width: 0 0 1px;">Дата приобретения статуса сироты: <th:block
											th:text="${person.orphanInfo.orphanDate}" /></li>
									<li class="list-group-item" style="border-width: 0 0 1px;">Район: <th:block
											th:text="${person.orphanInfo.orphanDistrict}" /></li>
									<li class="list-group-item" style="border-width: 0 0 1px;">Форма, дата устройства, № приказа в учреждении
										образования: <th:block th:text="${person.orphanInfo.formDateOrder}" />
									</li>
									<li class="list-group-item" style="border-width: 0 0 1px;">Закреплено жилье: <th:block
											th:text="${person.orphanInfo.fixedHousing}" /></li>
									<li class="list-group-item" style="border-width: 0 0 1px;">Поставлен на учет нуждающихся в улучшении
										жилищных условий: <th:block th:text="${person.orphanInfo.accountingHouseImprove}" />
									</li>
									<li class="list-group-item" style="border-width: 0 0 1px;">Сведения о родителях, подтверждающие статус
										сироты: <th:block th:text="${person.orphanInfo.infoParentsOrphStatus}" />
									</li>
									<li class="list-group-item" style="border-width: 0 0 1px;">Регистрация по месту пребывания: <th:block
											th:text="${person.orphanInfo.registrPlaceStay}" /></li>
									<li class="list-group-item" style="border-width: 0 0 1px;">Регистрация по месту жительства: <th:block
											th:text="${person.orphanInfo.registrPlaceResidence}" /></li>
								</div>
							</div>
						</th:block>

						<div class="accordion" id="accordion3">
							<li class="list-group-item" style="border-width: 0 0 1px;" data-toggle="collapse" data-target="#collapse3"
								aria-controls="collapse3"><b>Информация о размерах одежды &#x25BE</b></li>
							<div id="collapse3" class="collapse" aria-labelledby="headingOne" data-parent="#accordion3">
								<li class="list-group-item" style="border-width: 0 0 1px;">Рост: <th:block th:text="${person.humanHeight}" /></li>
								<li class="list-group-item" style="border-width: 0 0 1px;">Вес: <th:block th:text="${person.humanWeight}" /></li>
								<li class="list-group-item" style="border-width: 0 0 1px;">Размер одежды: <th:block
										th:text="${person.clothingSize}" /></li>
								<li class="list-group-item" style="border-width: 0 0 1px;">Размер обуви: <th:block
										th:text="${person.footSize}" /></li>
								<li class="list-group-item" style="border-width: 0 0 1px;">Обхват головы: <th:block
										th:text="${person.headCircumference}" /></li>
							</div>
						</div>

						<th:block th:if="personCourses != null">
							<div class="accordion" id="accordion0">
								<li class="list-group-item" style="border-width: 0 0 1px;" data-toggle="collapse" data-target="#collapse0"
									aria-controls="collapse0"><b>Приказы о переводах на след. курс &#x25BE</b></li>
								<div id="collapse0" class="collapse" aria-labelledby="headingOne" data-parent="#accordion0">
									<th:block th:each="pc: ${personCourses}">
										<li class="list-group-item" style="border-width: 0 0 1px;">Переведен на <th:block th:text="${pc.course}" />
											курс группа <th:block th:text="${pc.group}" /> Приказ № <th:block th:text="${pc.order}" /></li>
									</th:block>
								</div>
							</div>
						</th:block>

						<div class="accordion" id="accordion4">
							<li class="list-group-item" style="border-width: 0 0 1px;" data-toggle="collapse" data-target="#collapse4"
								aria-controls="collapse4"><b>Направление на работу &#x25BE</b></li>
							<div id="collapse4" class="collapse" aria-labelledby="headingOne" data-parent="#accordion4">
								<li class="list-group-item" style="border-width: 0 0 1px;">Получил направление на работу <th:block
										th:text="${person.jobReferral}" /></li>
								<li class="list-group-item" style="border-width: 0 0 1px;">должность <th:block
										th:text="${person.workingPosition}" /></li>
								<li class="list-group-item" style="border-width: 0 0 1px;">название организации <th:block
										th:text="${person.workOrganization}" /></li>
								<li class="list-group-item" style="border-width: 0 0 1px;">адрес <th:block th:text="${person.workAddress}" /></li>
								<li class="list-group-item" style="border-width: 0 0 1px;">Орган гос. управления <th:block
										th:text="${person.governmentBody}" /></li>
							</div>
						</div>

						<th:block th:if="personInc != null">
							<div class="accordion" id="accordion5">
								<li class="list-group-item" style="border-width: 0 0 1px;" data-toggle="collapse" data-target="#collapse5"
									aria-controls="collapse5"><b>Поощрения &#x25BE</b></li>
								<div id="collapse5" class="collapse" aria-labelledby="headingOne" data-parent="#accordion5">
									<th:block th:each="pi: ${personInc}">
										<li class="list-group-item" style="border-width: 0 0 1px;">Характер поощрения: <th:block
												th:text="${pi.character}" /> | Номер и дата приказа: <th:block th:text="${pi.numberAndDateOfTheOrder}" /></li>
									</th:block>
								</div>
							</div>
						</th:block>

						<th:block th:if="personPen != null">
							<div class="accordion" id="accordion6">
								<li class="list-group-item" style="border-width: 0 0 1px;" data-toggle="collapse" data-target="#collapse6"
									aria-controls="collapse6"><b>Взыскания &#x25BE</b></li>
								<div id="collapse6" class="collapse" aria-labelledby="headingOne" data-parent="#accordion6">
									<th:block th:each="pp: ${personPen}">
										<li class="list-group-item" style="border-width: 0 0 1px;">Характер взыскания: <th:block
												th:text="${pp.character}" /> | Номер и дата приказа: <th:block th:text="${pp.numberAndDateOfTheOrder}" /></li>
									</th:block>
								</div>
							</div>
						</th:block>

						<li class="list-group-item"><b>Общественная работа: </b> <th:block th:text="${person.socialWork}" /></li>
						
						</div>
						
					</ul>
				</div>
				
				<!-- конец первой вкладки -->

				<div class="tab-pane fade show" id="nav-photos" role="tabpanel" aria-labelledby="nav-profile-tab">

					<form action="/sendPersonPhoto" method="POST" enctype="multipart/form-data">
						<input name="id" type="hidden" class="custom-file-input" id="idPerson1" th:value="${person.id}">
						<div class="input-group">
							<div class="custom-file">
								<input name="ph" type="file" class="custom-file-input" id="inputGroupFile04"
									aria-describedby="inputGroupFileAddon04" required="required"> <label class="custom-file-label"
									for="inputGroupFile04"></label>
							</div>
							<div class="input-group-append">
								<button class="btn btn-outline-secondary" type="submit" id="inputGroupFileAddon04">Загрузить</button>
							</div>
						</div>
					</form>

					<div class="row1">
						<div class="column1" th:each="photo: ${photos}">
							<img th:src="${'data:image/jpeg;base64,' + photo}" style="width: 100%" onclick="myFunction(this);">
						</div>
					</div>

					<div class="container1">
						<span onclick="this.parentElement.style.display='none'" class="closebtn1">×</span> <img id="expandedImg"
							style="width: 100%">
						<div id="imgtext"></div>
					</div>
				</div>
				<div class="tab-pane fade show" id="nav-docs" role="tabpanel" aria-labelledby="nav-docs-tab">
				<div class="row" style="padding-top: 10px; padding-bottom: 10px; padding-left: 30px;">
				<div class="col-md-5" style="max-width: 35.666667%;">
					<form action="/sendPersonDoc" method="POST" enctype="multipart/form-data" style="padding-top: 5px;">
						<input name="id" type="hidden" class="custom-file-input" id="idPerson2" th:value="${person.id}">
						
						<div class="form-check" style="margin-left: 20px;">
							<input class="form-check-input" name="flexRadioDefault" value="passport" type="radio" id="flexCheckChecked1" checked> 
							<label class="form-check-label" for="flexCheckChecked1" style="margin-right: 50px;"> Паспорт </label>
							<input class="form-check-input" name="flexRadioDefault" value="educationDocument" type="radio" id="flexCheckChecked2">
							<label class="form-check-label" for="flexCheckChecked2"> Документ об образовании </label>
						</div>
				</div>

				<div class="col-md-7">
						<div class="input-group">
							<div class="custom-file">
								<input name="doc" type="file" class="custom-file-input" id="inputGroupFile03"
									aria-describedby="inputGroupFileAddon03"> <label class="custom-file-label" for="inputGroupFile03"></label>
							</div>
							<div class="input-group-append">
								<button class="btn btn-outline-secondary" type="submit" id="inputGroupFileAddon03">Загрузить</button>
							</div>
						</div>
						</div>
					</form>
					</div>

					<ul class="list-group ">
						<li class="list-group-item" th:each="doc, status: ${docs}">
							<div class="row">
								<div class="col-md-10" style="margin-top: auto; margin-bottom: auto">
									<a th:href="@{/downWord/person?id={did}(did=${doc.id})}" class="card-link" style="float: bottom"><th:block
											th:text="${status.count + '.  ' + doc.docName}"></a>
								</div>
								<div class="col-md-2">
									<form action="/delPersonDoc" method="POST" style="text-align: right">
										<input name="personId" type="hidden" class="custom-file-input" id="idPerson" th:value="${person.id}">
										<input name="docId" type="hidden" class="custom-file-input" id="idDoc" th:value="${doc.id}">
										<button type="submit" class="btn btn-danger " style="float: right">Удалить</button>
									</form>
									<!--  <button type="button" class="btn btn-danger btn-sm" style="float:right">Удалить</button>  -->
								</div>
							</div>
						</li>
					</ul>

				</div>

				<div class="tab-pane fade show" id="nav-ii" role="tabpanel" aria-labelledby="nav-ii-tab">

					<h4 style="text-align: center;">Внутренняя опись</h4>

					<table class="table table-primary">
						<thead>
							<tr>
								<th scope="col" style="text-align: center">№ п/п</th>
								<th scope="col" style="text-align: center">Наименование документа</th>
								<th scope="col" style="text-align: center">Дата документа</th>
								<th scope="col" style="text-align: center">№ листов</th>
								<th scope="col" style="text-align: center">Примечание</th>
								<th scope="col" colspan="2" style="text-align: center">Редактирование</th>
							</tr>
						</thead>
						<tbody>
							<tr class="table-secondary ow" th:each="ii, status: ${personsII}">
								<form action="/person/saveInventory" accept-charset="UTF-8" method="POST">
									<input class="input-group-text" name="id" type="text" th:id="${'id' + status.count}" th:value="${ii.id}"
										hidden="true" /> <input class="input-group-text" name="personId" type="text"
										th:id="${'idPerson' + status.count}" th:value="${ii.personId}" hidden="true" />
									<td style="text-align: center"><th:block th:text="${status.count}" /></td>
									<td style="text-align: center"><input class="input-group-text" name="docName" type="text"
										th:id="${'docName' + status.count}" th:value="${ii.docName}" th:disabled="true" /></td>
									<td style="text-align: center"><input class="input-group-text" name="docDate" type="date"
										th:id="${'docDate' + status.count}" th:value="${ii.docDate}" th:disabled="true" /></td>
									<td style="text-align: center"><input class="input-group-text" name="sheetNumber" type="number"
										th:id="${'sheetNumber' + status.count}" th:value="${ii.sheetNumber}" th:disabled="true" style="width: 120px;" /></td>
									<td style="text-align: center"><input class="input-group-text" name="note" type="text"
										th:id="${'note' + status.count}" th:value="${ii.note}" th:disabled="true" /></td>
									<td>

										<button class="btn" th:id="${'done_img' + status.count}" type="submit" hidden="true">
											<img src="/img/logos/done_logo.png" alt="save2" style="height: 20px; width: 20px" title="Сохранить">
										</button> <a class="btn"> <img th:id="${'pen_img' + status.count}" src="/img/logos/edit_pen_logo.png" alt="edit"
											style="height: 20px; width: 20px" title="Редактировать" onclick="editInventory(this);"></a>

									</td>
								</form>
								<td>
									<form action="/person/deleteInventory" accept-charset="UTF-8" method="POST">
										<input class="input-group-text" name="id" type="text" th:id="${'id' + status.count}" th:value="${ii.id}"
											hidden="true" /> <input class="input-group-text" name="personId" type="text"
											th:id="${'idPerson' + status.count}" th:value="${ii.personId}" hidden="true" />
										<button class="btn" th:id="${'done_img' + status.count}" type="submit">
											<img src="/img/logos/delete_logo.png" alt="save02" style="height: 20px; width: 20px" title="Сохранить">
										</button>
										<!-- <input class="input-group-text" name="personId" type="text" th:id="${'idPerson' + status.count}" th:value="${ii.personId}"  hidden="true" /> -->
									</form>
								</td>
							</tr>
						</tbody>
					</table>
					<button class="btn btn-primary" type="button" data-toggle="modal" data-target="#exampleModal">Добавить</button>
					<a class="btn btn-primary" th:href="@{/person/printInventory?id={pid}(pid=${person.id})}">Печать</a>

					<!-- Modal -->
					<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
						aria-hidden="true">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLabel">Добавление описи</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<form action="/person/saveInventory" accept-charset="UTF-8" method="POST">
									<div class="modal-body">
										<input class="input-group-text" name="personId" type="text" th:value="${person.id}" hidden="true"
											required="required" />
										<div class="input-group mb-3">
											<div class="input-group-prepend">
												<span class="input-group-text sp-width">Наименование документа</span>
											</div>
											<input class="input-group-text in-width" name="docName" type="text" required="required" />
										</div>
										<div class="input-group mb-3">
											<div class="input-group-prepend">
												<span class="input-group-text sp-width">Дата добавления</span>
											</div>
											<input class="input-group-text in-width" name="docDate" type="date" required="required" />
										</div>
										<div class="input-group mb-3">
											<div class="input-group-prepend">
												<span class="input-group-text sp-width">Количество страниц</span>
											</div>
											<input class="input-group-text in-width" name="sheetNumber" type="text" required="required" />
										</div>
										<div class="input-group mb-3">
											<div class="input-group-prepend">
												<span class="input-group-text sp-width">Описание</span>
											</div>
											<textarea class="input-group-text in-width" name="note"></textarea>
										</div>
									</div>
									<div class="modal-footer">
										<button type="submit" class="btn btn-primary">Добавить</button>
									</div>
								</form>
							</div>
						</div>
					</div>

				</div>
				<div class="tab-pane fade show" id="nav-balls" role="tabpanel" aria-labelledby="nav-balls-tab">

					<h4 style="text-align: center;">Отметки по учебным дисциплинам</h4>

					<table class="table table-primary">
						<thead>
							<tr>
								<th scope="col">№ п/п</th>
								<th scope="col">Наименование учебных дисциплин</th>
								<th scope="col">1к 1с</th>
								<th scope="col">1к 2с</th>
								<th scope="col">2к 3с</th>
								<th scope="col">2к 4с</th>
								<th scope="col">3к 5с</th>
								<th scope="col">3к 6с</th>
								<th scope="col">4к 7с</th>
								<th scope="col">4к 8с</th>
								<th scope="col">5к 9с</th>
								<th scope="col">5к 10с</th>
								<th scope="col">Отметка в приложении к диплому</th>
							</tr>
						</thead>
						<tbody>
							<tr class="table-secondary" th:each="sub, status: ${subjects}">
								<td><th:block th:text="${status.count}" /></td>
								<td><th:block th:text="${sub.name}" /></td>

								<td><th:block th:each="ball: ${balls}"
										th:text="${((sub.id == ball.subjectsId) && (ball.course == 1) && (ball.semester == 1) ) ? ball.ball : ''}" /></td>
								<td><th:block th:each="ball: ${balls}"
										th:text="${((sub.id == ball.subjectsId) && (ball.course == 1) && (ball.semester == 2) ) ? ball.ball : ''}" /></td>
								<td><th:block th:each="ball: ${balls}"
										th:text="${((sub.id == ball.subjectsId) && (ball.course == 2) && (ball.semester == 3) ) ? ball.ball : ''}" /></td>
								<td><th:block th:each="ball: ${balls}"
										th:text="${((sub.id == ball.subjectsId) && (ball.course == 2) && (ball.semester == 4) ) ? ball.ball : ''}" /></td>
								<td><th:block th:each="ball: ${balls}"
										th:text="${((sub.id == ball.subjectsId) && (ball.course == 3) && (ball.semester == 5) ) ? ball.ball : ''}" /></td>
								<td><th:block th:each="ball: ${balls}"
										th:text="${((sub.id == ball.subjectsId) && (ball.course == 3) && (ball.semester == 6) ) ? ball.ball : ''}" /></td>
								<td><th:block th:each="ball: ${balls}"
										th:text="${((sub.id == ball.subjectsId) && (ball.course == 4) && (ball.semester == 7) ) ? ball.ball : ''}" /></td>
								<td><th:block th:each="ball: ${balls}"
										th:text="${((sub.id == ball.subjectsId) && (ball.course == 4) && (ball.semester == 8) ) ? ball.ball : ''}" /></td>
								<td><th:block th:each="ball: ${balls}"
										th:text="${((sub.id == ball.subjectsId) && (ball.course == 5) && (ball.semester == 9) ) ? ball.ball : ''}" /></td>
								<td><th:block th:each="ball: ${balls}"
										th:text="${((sub.id == ball.subjectsId) && (ball.course == 5) && (ball.semester == 10) ) ? ball.ball : ''}" /></td>
								<td><th:block th:each="ballD: ${ballDiplom}" th:text="${sub.id == ballD.subjectsId ? ballD.ball : ''}" /></td>
							</tr>
						</tbody>
					</table>


				</div>
			</div>
		</div>
	</div>
	
	
	<script type="text/javascript" th:src="@{/js/fancybox/jquery-3.2.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/fancybox/jquery.fancybox.min.js}"></script>
    
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
		integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
		integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
	<!-- script src="https://cdn.ckeditor.com/ckeditor5/20.0.0/classic/ckeditor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script -->
    
    
    
    <script>
    var counter = 1;
$('.m1').each(function(i,elem) {
    console.log('hello')
    var el=elem;
    var loading_img = $('#loading'+counter++);
    var el_coords = $(el).offset();
    console.log(el_coords);
    
    loading_img.show().css({
        left: el_coords.left + (($(el).width()) - (loading_img.width()) - (loading_img.width())/8), // 240/2 - 24/2   120 + 12
        top: el_coords.top + (($(el).height()) - (loading_img.height()) -(loading_img.height())/8),
    });
    
});

    var counter1 = 1;
$('.m2').each(function(i,elem) {
    console.log('m2')
    var el=elem;
    var loading_img = $('#loading1'+counter1++);
    var el_coords = $(el).offset();
    console.log(el_coords);
    
    loading_img.show().css({
        left: el_coords.left + (($(el).width()) - (loading_img.width()) - (loading_img.width())/8), // 240/2 - 24/2   120 + 12
        top: el_coords.top + (($(el).height()) - (loading_img.height()) -(loading_img.height())/8),
    });
    
});
</script>
    
	<script>
		function myFunction(imgs) {
			var expandImg = document.getElementById("expandedImg");
			var imgText = document.getElementById("imgtext");
			expandImg.src = imgs.src;
			imgText.innerHTML = imgs.alt;
			expandImg.parentElement.style.display = "block";
		}
	</script>
	<script type="text/javascript">
		$('#inputGroupFile04').on('change', function() {
			//get the file name
			var fileName = $(this).val();
			// alert("file: "+fileName);
			//replace the "Choose a file" label
			var str = fileName.substr(12, fileName.lenght);
			$(this).next('.custom-file-label').html(str);
		})
	</script>
	<script type="text/javascript">
		$('#inputGroupFile03').on('change', function() {
			//get the file name
			var fileName = $(this).val();
			// alert("file: "+fileName);
			//replace the "Choose a file" label
			var str = fileName.substr(12, fileName.lenght);
			$(this).next('.custom-file-label').html(str);
		})
	</script>

	<script type="text/javascript">
		function editInventory(img) {
			var btnDone = document.getElementById("done_img"
					+ img.id.slice(img.id.length - 1));
			btnDone.removeAttribute('hidden');

			var thDocName = document.getElementById("docName"
					+ img.id.slice(img.id.length - 1));
			thDocName.removeAttribute('disabled');

			var thDate = document.getElementById("docDate"
					+ img.id.slice(img.id.length - 1));
			thDate.disabled = false;

			var thSheetNumber = document.getElementById("sheetNumber"
					+ img.id.slice(img.id.length - 1));
			thSheetNumber.removeAttribute('disabled');

			var thNote = document.getElementById("note"
					+ img.id.slice(img.id.length - 1));
			thNote.removeAttribute('disabled');
			//console.log("note" + str.slice(str.length - 1));
			//console.log(str.length);
		}
	</script>
	<!-- script type="text/javascript">
    $(function() { 
        $('a[data-toggle="tab"]').on('shown.bs.tab', function(e){
            //save the latest tab using a cookie:
            localStorage.setItem('last_tab', $(e.target).attr('href'));
        });
        //activate latest tab, if it exists:
        var lastTab = localStorage.getItem('lastTab');
        var qw = $('a[href="' + lastTab + '"]');
        if (lastTab) {
        	qw.tab('show');
        }
        else
        {
            // Set the first tab if cookie do not exist
            $('a[data-toggle="tab"]:first').tab('show');
        }
    });
    </script-->
</body>
</html>