<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<title>Добавить</title>
    <head th:replace="commons::head"></head>
    <!-- link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.min.css"-->
<body>
    <div th:replace="commons::navbar"></div>
    <div th:replace="commons::navSpps"></div>

<div class="wrapper">
<div class="container" style="width: 70%;">

                <th:block th:if = "${errors.size() != 0}" th:each="e: ${errors}">
                    <div class="alert alert-warning" role="alert"> <th:block th:text="'Ошибка: ' + ${e}"/>
                    </div>
                </th:block>
                
                <th:block th:if = "${done != null}">
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                      <strong>Добавление прошло успешно</strong>
                      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                </th:block>


<form action="/personAddInSpps" accept-charset="UTF-8" method="POST">
                
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <div class="input-group-text" style="width: 100%;">ФИО</div>
                    </div>
                  
                  <div style="border: 10px solid transparent; width: 92%;">
                    
                   
                  <th:block th:if ="${personInfo == null}">
                        <select class="livesearch" name="idPerson" style="width: 100%;">
                            <div th:each="person: ${persons}">
                                <option th:value="${person.id}">
                                <th:block th:text="${person.surname}"/> 
                                <th:block th:text="${person.name}"/> 
                                <th:block th:text="${person.patronymic}"/> 
                                </option>
                            </div>
                        </select>
                    </th:block>
                        
                    <th:block th:if ="${personInfo != null}">
                    
                    <select class="livesearch" name="idPerson" style="width: 100%;">
                    <option selected th:value="${personInfo.id}">
                        <th:block th:text="${personInfo.surname}"/> 
                                <th:block th:text="${personInfo.name}"/> 
                                <th:block th:text="${personInfo.patronymic}"/> 
                    </option>
                    
                            <div th:each="person: ${persons}">
                                <option th:value="${person.id}">
                                <th:block th:text="${person.surname}"/> 
                                <th:block th:text="${person.name}"/> 
                                <th:block th:text="${person.patronymic}"/> 
                                </option>
                            </div>
                    
                    </select>

                    </th:block>
                        
                 </div>
                </div> 
                
                <div class="input-group mb-3">
                    <div style="margin: 0 auto;">
                        <th:block th:if ="${personInfo == null}">
                            <select class="custom-select" name="sppsService" id="inputGroupSelect01">
                                <option selected value="соп"> СОП </option>
                                <option value="ипр"> ИПР </option>
                                <option value="пирп"> ПИРП </option>
                            </select>
                        </th:block>
                        
                        <th:block th:if ="${personInfo != null}">
                        <select class="custom-select" name="sppsService" id="inputGroupSelect01">
                                <option selected th:value="${personInfo.sppsService}"> <th:block th:text="${personInfo.sppsService}"/>  </option>
                                <option value="соп"> СОП </option>
                                <option value="ипр"> ИПР </option>
                                <option value="пирп"> ПИРП </option>
                            </select>
                        </th:block>
                        
                    </div>
                </div>
                
               <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <div class="input-group-text">Дата</div>
                    </div>
                    <th:block th:if ="${personInfo != null}">
                    <input required type="date" name="date" th:value="${personInfo.date}" class="form-control">
                    </th:block>
                    <th:block th:if ="${personInfo == null}">
                     <input required type="date" name="date" class="form-control">
                    </th:block>
               </div>
               
               <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <div class="input-group-text">Причина</div>
                    </div>
                    <th:block th:if ="${personInfo != null}">
                        <textarea maxlength="512" class="form-control" aria-label="textarea" 
                            name="description">
                            <th:block th:text="${personInfo.description}"/> 
                        </textarea>
                    </th:block>
                    <th:block th:if ="${personInfo == null}">
                        <textarea maxlength="512" class="form-control" aria-label="textarea" 
                            name="description"></textarea>
                    </th:block>
               </div>
                
                
                
                 <button style="font-size: 120%; width: 40%; margin: 0 auto;" type="submit" class="btn btn-primary">Добавить</button>
            </form>
        </div>
<!--  <div class="container text-center">

   <div style="border-bottom: 5px solid transparent;">

   <h4 style="border: 10px solid transparent;"> Поиск человека на заселение по ФИО </h4> 
   <form action="/personInfo.html" accept-charset="UTF-8" method="POST">
   <div class="input-group mb-3" style="border: 5px solid transparent; text-align: left;">
   
        <select class="livesearch" name="idPerson" style="width: 100%;">

        <div th:each="person: ${persons}">
        <option th:value="${person.id}"><th:block th:text="${person.surname}"/> <th:block th:text="${person.name}"/> <th:block th:text="${person.patronymic}"/></option>
        </div>
        
        </select>
                    
   </div>
   <button style="margin: 0 auto; border: 5px solid transparent;" type="submit" class="btn btn-success">Выбрать</button>
   </form>
    </div>
</div>-->

</div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://cdn.ckeditor.com/ckeditor5/20.0.0/classic/ckeditor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
    <script type="text/javascript"> $(".livesearch").chosen(); </script>

</body>
</html>